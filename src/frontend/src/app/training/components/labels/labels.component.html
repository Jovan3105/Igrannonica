<div class="card" style="height: 27rem;" *ngIf = "headers">
  <h3 class="card-header mb-0">Choose features</h3>
  <div class="card-body" style="overflow-y: auto;padding:0.5rem" tabindex="0">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Include</th>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Encoding</th>
            <th scope="col" *ngIf="showMissingColumn">Fill Missing Values With</th>
          </tr>
        </thead>
        <tbody *ngFor="let header of headers; index as i" style="overflow-y:auto;">
          <tr>
            <td>
              <input class="form-check-input" type="checkbox" [value]="header.key" 
              [checked]="checkboxCheckedArray[i]" 
              [disabled]="checkboxDisabledArray[i]" id="inputCheckbox{{header.key}}" 
              (change)= "onCheckChange($event)">
            </td>
            <td>
              <label class="form-check-label custom-label" for="inputCheckbox{{header.key}}">
                {{header.name}}
                <div *ngIf="targetColumn && targetColumn.key == header.key">
                  <span style="font-size: x-small;">Output</span>
                </div>
              </label>
            </td>
            <td>
              <select class="form-select" #typeSelection aria-label="Default select example" (change)="onTypeChange(typeSelection.value,i)" >
                <option value="Categorical" [selected]="header.type !='int64' && header.type !='float64'">Categorical</option>
                <option value="Numerical" [selected]="header.type =='int64' || header.type =='float64'">Numerical</option> 
              </select>
            </td>
            <td>
              <select class="form-select" #encodingSelection aria-label="Default select example" (change)="onEncodingChange(i,encodingSelection.value)" [disabled]="encodingDisabledArray[i]">
                <option value="None" [hidden]="!encodingDisabledArray[i]" [selected]="encodingDisabledArray[i]">Not Allowed</option><!-- TODO izmestiti listu encoding-a -->
                <option value="OneHot" [selected]="!encodingDisabledArray[i]">One Hot</option>
                <option value="Ordinal">Ordinal</option> 
                <option value="Binary">Binary</option> 
              </select>
            </td>
            <td *ngIf="showMissingColumn">
              <select class="form-select" #missingSelection aria-label="Default select example" *ngIf="typeSelection.value == 'Categorical'" (change)="onMissingChange(i, missingSelection.value)">
                <option *ngFor="let handler of missing_categorical" [value]="handler.codename">
                  {{handler.name}}
                </option>
              </select>
              <select class="form-select" aria-label="Default select example" *ngIf="typeSelection.value == 'Numerical'" style="width: 100%;">
                <option *ngFor="let handler of missing_numerical" [value]="handler.codename">
                  {{handler.name}}
                </option>
              </select>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="card" style="height: 30%;" *ngIf = "headers">
  <h3 class="card-header mb-0">Choose target variable</h3>
  <div class="card-body">
    <select [(ngModel)]="targetColumn" #selectLabel class="form-select" aria-label="Odabir izlaza" 
    (change)="onSelectLabel()"><!-- TODO povecati font za aria-label -->
      <option [ngValue]="null" disabled>Choose target variable</option>
      <option class="word-wrap" *ngFor="let header of headers;" [ngValue]="header">
        {{header.name}}</option> <!-- TODO postaviti automatski tip -->
    </select>
  </div>
</div>

