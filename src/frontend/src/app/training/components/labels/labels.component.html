<div class="card" style="height: 27rem;" *ngIf = "columns">
  <div class="row card-header ms-0 me-0">
    <h2 class="mb-0 ps-0 col-sm-6">Choose features</h2>
  </div>
  <div class="row card-header ms-0 me-0">
    <div class="btn col-sm-6 text-center selectAllButton" (click)="selectAll()">
      <div class="text-nowrap" >
        Select All 
      </div>
    </div>
    <div class="btn col-sm-6 text-center unselectAllButton" (click)="unselectAll()">
      <div class="text-nowrap">
        Deselect All
      </div>
    </div>
  </div>
  <div class="card-body" style="overflow-y: auto;padding:0.5rem" tabindex="0">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Include</th>
            <th scope="col">Column Name</th>
            <th scope="col">Type</th>
            <th scope="col">Encoding</th>
            <th scope="col" *ngIf="showMissingColumn">Fill Missing Values With</th>
          </tr>
        </thead>
        <tbody *ngFor="let column of columns; index as i" style="overflow-y:auto;">
          <tr>
            <td>
              <input class="form-check-input" type="checkbox" [value]="column.key" 
              [checked]="checkboxCheckedArray[i]" 
              [disabled]="targetColumn != null && targetColumn.key == i" id="inputCheckbox{{column.key}}" 
              (change)= "onCheckChange($event)">
            </td>
            <td>
              <label class="form-check-label custom-label" for="inputCheckbox{{column.key}}">
                {{column.name}}
                <div *ngIf="targetColumn && targetColumn.key == column.key">
                  <span style="font-size: x-small;">Output</span>
                </div>
              </label>
            </td>
            <td>
              <select class="form-select" #typeSelection aria-label="Default select example" (change)="onTypeChange(typeSelection.value,i)" >
                <option value="Categorical" [selected]="column.type !='int64' && column.type !='float64'">Categorical</option>
                <option value="Numerical" [selected]="column.type =='int64' || column.type =='float64'">Numerical</option> 
              </select>
            </td>
            <td> <!-- NAPOMENA: redosled opcija mora da se poklapa sa redosledom u modelima -->
              <select [hidden]="targetColumn && targetColumn.key == columns[i].key" class="form-select" #encodingSelection aria-label="Default select example" (change)="onEncodingChange(i,encodingSelection.value)" [disabled]="encodingDisabledArray[i]">
                <option value="None" [hidden]="!encodingDisabledArray[i]" [selected]="encodingDisabledArray[i]">Not Allowed</option><!-- TODO izmestiti listu encoding-a -->
                <option value="OneHot" [selected]="!encodingDisabledArray[i]">One Hot</option>
                <option value="Ordinal">Ordinal</option> 
                <option  value="Binary">Binary</option> 
              </select>
            </td>
            <td class="missing-handler" *ngIf="showMissingColumn">
              <div id="constant-div" class="row bg-primary p-1" style="--bs-gutter-x: 0rem;" *ngIf="!constantsDisabledArray[i]">
                <span style="margin-top: 2.5px;" class="col-10 trim-content">Constant - <b>{{constantsChoosen.get(i)}}</b></span>
                <span class="col-2"><mat-icon id="close-icon" (click)="deleteConstant(i)">close</mat-icon></span>
              </div>
              <select class="form-select" [(ngModel)]="selectedMissingHandler[i]"  #missingSelection aria-label="Default select example" *ngIf="typeSelection.value == 'Categorical' && constantsDisabledArray[i]" (change)="onMissingChange(i, missingSelection.value)">
                <option *ngFor="let handler of missing_categorical" [value]="handler.codename">
                  {{handler.name}}
                </option>
              </select>
              <select class="form-select" [(ngModel)]="selectedMissingHandler[i]" aria-label="Default select example" #missingNumericalSelection *ngIf="typeSelection.value == 'Numerical' && constantsDisabledArray[i]" (change)="onMissingChange(i, missingNumericalSelection.value)">
                <option *ngFor="let handler of missing_numerical" [value]="handler.codename">
                  {{handler.name}}
                </option>
              </select>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="card" style="height: 30%;" *ngIf = "columns">
  <h2 class="card-header mb-0">Choose target variable</h2>
  <div class="card-body">
    <select [(ngModel)]="targetColumn" #selectLabel class="form-select" aria-label="Odabir izlaza" 
    (change)="onLabelColSelect()"><!-- TODO povecati font za aria-label -->
      <option [ngValue]="null" disabled></option>
      <option class="word-wrap" *ngFor="let column of columns;" [ngValue]="column">
        {{column.name}}</option> <!-- TODO postaviti automatski tip -->
    </select>
  </div>
</div>

